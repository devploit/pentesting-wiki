# VLAN Hopping to VoIP Network

First of all, we must have our PC connected directly to the VoIP phone that we are going to spoof \(obviously, this will be connected to the corresponding switch\).

With the successful connection, we will capture a CDP packet. Being directly connected to the Cisco device \(VoIP phone\), the only package that should reach us is that of the phone itself.

![](../../../.gitbook/assets/image.png)

With the captured package we verify that it really is the information we need.

![](../../../.gitbook/assets/image%20%282%29.png)

Once we have the necessary package, we disconnect from the phone and connect directly to the network \(that is, because we are going to impersonate the Cisco dispositive, if we leave the device connected, the switch will detect that there are two devices with the same configuration and impersonation will not take effect\).

We replicate the device package to make the Cisco switch believe that we are a VoIP device. In addition, these phones send a package every 60 seconds approximately to ensure the connection, so we must do the same to be trusted.

![](../../../.gitbook/assets/image%20%285%29.png)

We must create a virtual interface by renaming our interface + the VLAN of the Cisco device.

```bash
vconfig add eth1 29 #29 is the VLAN number of Cisco device
```

We check that it has been created successfully.

![](../../../.gitbook/assets/image%20%283%29.png)

We disable the interface to modify the MAC and change it for the legitimate phone \(we can see this setting directly in phone options\).

![](../../../.gitbook/assets/image%20%284%29.png)

With everything configured, we make a dhclient of the interface to verify that the switch provides us with the IP of the phone.

![](../../../.gitbook/assets/image%20%286%29.png)

We see how we already have the IP. We only have to verify that we have a connection to the gateway to verify that we are correctly authenticated in the VoIP VLAN.

![](../../../.gitbook/assets/image%20%287%29.png)

